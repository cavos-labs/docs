---
title: "Error Handling"
description: "Common errors and troubleshooting"
---

## Error Categories

| Category | Examples |
|----------|----------|
| Authentication | Email not verified, invalid credentials, OAuth failed |
| Email Verification | Rate limited, token expired, already verified |
| Wallet | No wallet found, creation failed |
| Transaction | Execution failed, insufficient funds |
| Network | RPC errors, timeout |
| Limits | MAU exceeded |

## Authentication Errors

### Email Not Verified (Firebase)

When a user tries to login before verifying their email:

```tsx
import { useCavos } from '@cavos/react';

try {
  await login('firebase', { email, password });
} catch (error) {
  if (error.name === 'EmailNotVerifiedError') {
    // Error object contains the email
    console.log('Unverified email:', error.email);

    // Show resend verification button
    showResendVerificationButton(error.email);
  }
}
```

### Invalid Credentials (Firebase)

```tsx
try {
  await login('firebase', { email, password });
} catch (error) {
  if (error.message?.includes('auth/wrong-password')) {
    showMessage('Invalid email or password');
  } else if (error.message?.includes('auth/user-not-found')) {
    showMessage('No account found with this email');
  } else if (error.message?.includes('auth/invalid-email')) {
    showMessage('Please enter a valid email address');
  }
}
```

### Email Already Registered

```tsx
try {
  await register('firebase', { email, password });
} catch (error) {
  if (error.error === 'Email already registered and verified') {
    showMessage('This email is already registered. Please login.');
  }
}
```

### Weak Password

```tsx
try {
  await register('firebase', { email, password });
} catch (error) {
  if (error.message?.includes('auth/weak-password')) {
    showMessage('Password must be at least 6 characters');
  }
}
```

### OAuth Failed (Google/Apple)

```tsx
try {
  await login('google');
} catch (error) {
  if (error.message.includes('popup')) {
    // Popup blocked
    showMessage('Please allow popups for authentication');
  } else if (error.message.includes('cancelled')) {
    // User closed OAuth window
    showMessage('Login cancelled');
  }
}
```

## Email Verification Errors

### Rate Limited

When trying to send verification emails too frequently:

```tsx
try {
  await cavos.resendVerificationEmail(email);
} catch (error) {
  if (error.error === 'rate_limited') {
    // Registration: 60 seconds between emails
    showMessage(`Please wait ${error.wait_seconds} seconds before trying again`);
  }
}
```

### Already Verified

```tsx
try {
  await cavos.resendVerificationEmail(email);
} catch (error) {
  if (error.error === 'already_verified') {
    showMessage('Your email is already verified! You can login now.');
  }
}
```

### Verification Token Expired

When a user clicks an expired verification link (>24 hours old):

```tsx
// User is redirected to your app with ?status=error&message=...
// Handle in your callback page:

const searchParams = new URLSearchParams(window.location.search);
if (searchParams.get('status') === 'error') {
  const message = searchParams.get('message');
  if (message?.includes('expired')) {
    showMessage('Verification link expired. Request a new one.');
    showResendButton();
  }
}
```

### Invalid Verification Token

```tsx
// Similar handling for invalid/used tokens
if (searchParams.get('status') === 'error') {
  const message = searchParams.get('message');
  if (message?.includes('invalid') || message?.includes('used')) {
    showMessage('Invalid verification link. Request a new one.');
  }
}
```

## Wallet Errors

### No Wallet Found

```tsx
try {
  await loadWallet();
} catch (error) {
  if (error.message === 'No wallet found') {
    // User doesn't have a wallet yet
    showCreateWalletPrompt();
  }
}
```

### Wallet Already Exists

When trying to create a wallet that exists:
- `createWallet()` automatically recovers
- No error thrown, existing wallet loaded

### MAU Limit Exceeded

```tsx
try {
  await createWallet();
} catch (error) {
  if (error.message.includes('MAU limit')) {
    showMessage('App limit reached. Please try later.');
  }
}
```

## Transaction Errors

### Not Initialized

```tsx
try {
  await execute(calls);
} catch (error) {
  if (error.message.includes('not initialized')) {
    // Need to create/load wallet first
    await createWallet();
    await execute(calls);
  }
}
```

### Contract Error

```tsx
try {
  await execute(calls, { gasless: true });
} catch (error) {
  // Parse Starknet error
  console.error('Transaction failed:', error.message);
  // Common: "Contract not found", "Entry point not found"
}
```

### Paymaster Error

```tsx
try {
  await execute(calls, { gasless: true });
} catch (error) {
  if (error.message.includes('paymaster')) {
    // Fallback to paid transaction
    await execute(calls, { gasless: false });
  }
}
```

## Network Errors

### RPC Timeout

```tsx
try {
  await execute(calls);
} catch (error) {
  if (error.message.includes('timeout') || 
      error.message.includes('network')) {
    showMessage('Network error. Please try again.');
  }
}
```

### Rate Limited

If using default Cavos RPC and hitting limits:

```tsx
const config = {
  appId: 'your-app-id',
  starknetRpcUrl: 'https://your-own-rpc.com',  // Use own RPC
};
```

## React Native Specific

### Domain Association Failed

```
Error: No matching passkeys found
```

Solutions:
1. Check rpId matches hosted files
2. Verify AASA/assetlinks content
3. Rebuild app after config change
4. Check associated domains entitlement

### SecureStore Errors

```tsx
try {
  await loadWallet();
} catch (error) {
  if (error.message.includes('SecureStore')) {
    // Storage issue, may need to clear and recreate
    await clearWallet();
    showMessage('Please create a new wallet');
  }
}
```

## Debugging

### Enable Logging

```tsx
const config = {
  appId: 'your-app-id',
  enableLogging: true,  // Console logs from SDK
};
```

### Check Wallet State

```tsx
const { cavos } = useCavos();

console.log('Address:', cavos.getAddress());
console.log('Authenticated:', cavos.isAuthenticated());
console.log('Has wallet:', await cavos.hasWallet());
console.log('Is deployed:', await cavos.isAccountDeployed());
```

## Error Recovery Flow

```tsx
async function handleError(error, operation) {
  if (error.message.includes('cancelled')) {
    // User action needed
    return { action: 'retry', message: 'Please authenticate' };
  }
  
  if (error.message.includes('MAU limit')) {
    // App limit
    return { action: 'wait', message: 'Limit reached' };
  }
  
  if (error.message.includes('network')) {
    // Network issue
    return { action: 'retry', message: 'Network error' };
  }
  
  // Unknown error
  console.error(`${operation} failed:`, error);
  return { action: 'support', message: 'Please contact support' };
}
```
